<template>
  <div class="IconField fieldbody fit vflex Numberfield">
    <Dropdown
      class="comboDropdown hflex"
      v-if="showDropdown"
      ref="comboDropdown"
      @blur="onBlur"
      noDfocus
    >
      <div class="iconpicker_window_ct fit" ref="comboAsdf">
        <Icon
          v-for="n in icons"
          :key="'ip_' + n"
          class="pointer"
          @click="select(n)"
          >{{ n }}</Icon
        >
      </div>
    </Dropdown>
    <input
      type="text"
      class="Textfield fit fieldBorder"
      :class="{ required }"
      v-model="value"
      autocomplete="off"
      :disabled="disabled"
    />
    <div
      :tabindex="disabled ? null : 0"
      class="fieldButton cflex pointer noselect"
      :style="{ color: value }"
      @click="open"
    >
      <Icon :icon="value"></Icon>
    </div>
    <slot />
  </div>
</template>

<script>
export default {
  mixins: [fieldMixin],
  data: function () {
    return {
      showDropdown: false,
      icons: [
        "641",
        "2b9",
        "2bb",
        "042",
        "5d0",
        "037",
        "039",
        "036",
        "038",
        "461",
        "0f9",
        "2a3",
        "13d",
        "103",
        "100",
        "101",
        "102",
        "107",
        "104",
        "105",
        "106",
        "556",
        "644",
        "5d1",
        "187",
        "557",
        "358",
        "359",
        "35a",
        "35b",
        "0ab",
        "0a8",
        "0a9",
        "0aa",
        "063",
        "060",
        "061",
        "062",
        "0b2",
        "337",
        "338",
        "2a2",
        "069",
        "1fa",
        "558",
        "5d2",
        "29e",
        "559",
        "77c",
        "77d",
        "55a",
        "04a",
        "7e5",
        "e059",
        "e05a",
        "666",
        "24e",
        "515",
        "516",
        "05e",
        "462",
        "02a",
        "0c9",
        "433",
        "434",
        "2cd",
        "244",
        "240",
        "242",
        "243",
        "241",
        "236",
        "0fc",
        "0f3",
        "1f6",
        "55b",
        "647",
        "206",
        "84a",
        "1e5",
        "780",
        "1fd",
        "517",
        "6b6",
        "29d",
        "781",
        "032",
        "0e7",
        "1e2",
        "5d7",
        "55c",
        "02d",
        "6b7",
        "7e6",
        "518",
        "5da",
        "02e",
        "84c",
        "850",
        "853",
        "436",
        "466",
        "49e",
        "e05b",
        "468",
        "2a1",
        "5dc",
        "7ec",
        "0b1",
        "469",
        "519",
        "51a",
        "55d",
        "188",
        "1ad",
        "0a1",
        "140",
        "46a",
        "207",
        "55e",
        "64a",
        "1ec",
        "133",
        "073",
        "274",
        "783",
        "272",
        "271",
        "273",
        "784",
        "030",
        "083",
        "6bb",
        "786",
        "55f",
        "46b",
        "1b9",
        "5de",
        "5df",
        "5e1",
        "5e4",
        "8ff",
        "0d7",
        "0d9",
        "0da",
        "150",
        "191",
        "152",
        "151",
        "0d8",
        "787",
        "218",
        "217",
        "788",
        "6be",
        "0a3",
        "6c0",
        "51b",
        "51c",
        "5e7",
        "1fe",
        "080",
        "201",
        "200",
        "00c",
        "058",
        "560",
        "14a",
        "7ef",
        "439",
        "43a",
        "43c",
        "43f",
        "441",
        "443",
        "445",
        "447",
        "13a",
        "137",
        "138",
        "139",
        "078",
        "053",
        "054",
        "077",
        "1ae",
        "51d",
        "111",
        "1ce",
        "64f",
        "7f2",
        "328",
        "46c",
        "46d",
        "017",
        "24d",
        "20a",
        "0c2",
        "381",
        "73b",
        "6c3",
        "73c",
        "73d",
        "740",
        "6c4",
        "743",
        "382",
        "561",
        "121",
        "126",
        "0f4",
        "013",
        "085",
        "51e",
        "0db",
        "075",
        "27a",
        "651",
        "4ad",
        "7f5",
        "4b3",
        "086",
        "653",
        "51f",
        "14e",
        "066",
        "422",
        "78c",
        "562",
        "563",
        "564",
        "0c5",
        "1f9",
        "4b8",
        "09d",
        "125",
        "565",
        "654",
        "05b",
        "520",
        "521",
        "7f7",
        "1b2",
        "1b3",
        "0c4",
        "1c0",
        "2a4",
        "747",
        "108",
        "655",
        "470",
        "522",
        "6cf",
        "6d1",
        "523",
        "524",
        "525",
        "526",
        "527",
        "528",
        "566",
        "5eb",
        "7fa",
        "529",
        "567",
        "471",
        "6d3",
        "155",
        "472",
        "474",
        "4b9",
        "52a",
        "52b",
        "192",
        "4ba",
        "019",
        "568",
        "6d5",
        "5ee",
        "569",
        "56a",
        "6d7",
        "44b",
        "793",
        "794",
        "6d9",
        "044",
        "7fb",
        "052",
        "141",
        "142",
        "0e0",
        "2b6",
        "658",
        "199",
        "52c",
        "12d",
        "796",
        "153",
        "362",
        "12a",
        "06a",
        "071",
        "065",
        "424",
        "31e",
        "35d",
        "360",
        "06e",
        "1fb",
        "070",
        "863",
        "049",
        "050",
        "e005",
        "1ac",
        "52d",
        "56b",
        "182",
        "0fb",
        "15b",
        "15c",
        "1c6",
        "1c7",
        "1c9",
        "56c",
        "6dd",
        "56d",
        "1c3",
        "56e",
        "1c5",
        "56f",
        "570",
        "571",
        "477",
        "478",
        "1c1",
        "1c4",
        "572",
        "573",
        "574",
        "1c8",
        "1c2",
        "575",
        "576",
        "008",
        "0b0",
        "577",
        "06d",
        "7e4",
        "134",
        "479",
        "578",
        "6de",
        "024",
        "11e",
        "74d",
        "0c3",
        "579",
        "07b",
        "65d",
        "07c",
        "65e",
        "031",
        "44e",
        "04e",
        "52e",
        "119",
        "57a",
        "662",
        "1e3",
        "11b",
        "52f",
        "0e3",
        "3a5",
        "22d",
        "6e2",
        "06b",
        "79c",
        "79f",
        "000",
        "57b",
        "7a0",
        "530",
        "0ac",
        "57c",
        "57d",
        "57e",
        "7a2",
        "450",
        "664",
        "19d",
        "531",
        "532",
        "57f",
        "580",
        "581",
        "582",
        "583",
        "584",
        "585",
        "586",
        "587",
        "588",
        "589",
        "58a",
        "58b",
        "58c",
        "58d",
        "7a4",
        "7a5",
        "58e",
        "7a6",
        "0fd",
        "805",
        "6e3",
        "665",
        "4bd",
        "4be",
        "e05c",
        "4c0",
        "4c1",
        "258",
        "806",
        "256",
        "25b",
        "0a7",
        "0a5",
        "0a4",
        "0a6",
        "25a",
        "255",
        "257",
        "e05d",
        "259",
        "4c2",
        "4c4",
        "e05e",
        "2b5",
        "e05f",
        "e060",
        "6e6",
        "807",
        "292",
        "8c0",
        "8c1",
        "6e8",
        "0a0",
        "e061",
        "e062",
        "e063",
        "e064",
        "1dc",
        "025",
        "58f",
        "590",
        "004",
        "7a9",
        "21e",
        "533",
        "591",
        "6ec",
        "6ed",
        "1da",
        "453",
        "7aa",
        "015",
        "6f0",
        "7ab",
        "0f8",
        "47d",
        "47e",
        "80d",
        "593",
        "80f",
        "594",
        "254",
        "253",
        "252",
        "251",
        "6f1",
        "e065",
        "6f2",
        "246",
        "810",
        "7ad",
        "86d",
        "2c1",
        "2c2",
        "47f",
        "7ae",
        "03e",
        "302",
        "01c",
        "03c",
        "275",
        "534",
        "129",
        "05a",
        "033",
        "669",
        "595",
        "66a",
        "66b",
        "084",
        "11c",
        "66d",
        "596",
        "597",
        "598",
        "535",
        "66f",
        "1ab",
        "109",
        "5fc",
        "e066",
        "812",
        "599",
        "59a",
        "59b",
        "59c",
        "5fd",
        "06c",
        "094",
        "536",
        "537",
        "3be",
        "3bf",
        "1cd",
        "0eb",
        "0c1",
        "195",
        "03a",
        "022",
        "0cb",
        "0ca",
        "124",
        "023",
        "3c1",
        "309",
        "30a",
        "30b",
        "30c",
        "2a8",
        "59d",
        "604",
        "e067",
        "0d0",
        "076",
        "674",
        "183",
        "279",
        "59f",
        "5a0",
        "041",
        "3c5",
        "276",
        "277",
        "5a1",
        "222",
        "227",
        "229",
        "22b",
        "22a",
        "6fa",
        "5a2",
        "0fa",
        "11a",
        "5a4",
        "5a5",
        "538",
        "676",
        "223",
        "753",
        "2db",
        "130",
        "3c9",
        "539",
        "131",
        "610",
        "068",
        "056",
        "146",
        "7b5",
        "10b",
        "3cd",
        "0d6",
        "3d1",
        "53a",
        "53b",
        "53c",
        "53d",
        "5a6",
        "186",
        "5a7",
        "678",
        "21c",
        "6fc",
        "8cc",
        "245",
        "7b6",
        "001",
        "6ff",
        "22c",
        "1ea",
        "53e",
        "481",
        "247",
        "248",
        "613",
        "679",
        "700",
        "03b",
        "815",
        "1fc",
        "5aa",
        "53f",
        "482",
        "1d8",
        "0c6",
        "4cd",
        "1dd",
        "540",
        "5ab",
        "67b",
        "0ea",
        "04c",
        "28b",
        "1b0",
        "67c",
        "304",
        "305",
        "5ac",
        "5ad",
        "14b",
        "303",
        "5ae",
        "e068",
        "4ce",
        "816",
        "295",
        "541",
        "756",
        "095",
        "879",
        "3dd",
        "098",
        "87b",
        "2a0",
        "87c",
        "4d3",
        "484",
        "818",
        "67f",
        "072",
        "5af",
        "5b0",
        "e069",
        "04b",
        "144",
        "1e6",
        "067",
        "055",
        "0fe",
        "2ce",
        "681",
        "682",
        "2fe",
        "75a",
        "619",
        "3e0",
        "154",
        "011",
        "683",
        "684",
        "5b1",
        "485",
        "486",
        "02f",
        "487",
        "542",
        "e06a",
        "e06b",
        "12e",
        "029",
        "128",
        "059",
        "458",
        "10d",
        "10e",
        "687",
        "7b9",
        "7ba",
        "75b",
        "074",
        "543",
        "8d9",
        "1b8",
        "01e",
        "2f9",
        "25d",
        "87d",
        "3e5",
        "122",
        "75e",
        "7bd",
        "079",
        "4d6",
        "70b",
        "018",
        "544",
        "135",
        "4d7",
        "09e",
        "143",
        "158",
        "545",
        "546",
        "547",
        "548",
        "70c",
        "156",
        "5b3",
        "5b4",
        "7bf",
        "7c0",
        "0c7",
        "549",
        "54a",
        "70e",
        "7c2",
        "002",
        "688",
        "689",
        "010",
        "00e",
        "4d8",
        "233",
        "61f",
        "064",
        "1e0",
        "1e1",
        "14d",
        "20b",
        "3ed",
        "e06c",
        "21a",
        "48b",
        "54b",
        "290",
        "291",
        "07a",
        "2cc",
        "5b6",
        "4d9",
        "2f6",
        "2a7",
        "2f5",
        "012",
        "5b7",
        "7c4",
        "e06d",
        "0e8",
        "7c5",
        "7c9",
        "7ca",
        "54c",
        "714",
        "715",
        "7cc",
        "1de",
        "118",
        "5b8",
        "4da",
        "75f",
        "48d",
        "54d",
        "7cd",
        "7ce",
        "2dc",
        "7d0",
        "7d2",
        "e06e",
        "696",
        "5ba",
        "0dc",
        "15d",
        "881",
        "15e",
        "882",
        "160",
        "884",
        "161",
        "885",
        "0dd",
        "162",
        "886",
        "163",
        "887",
        "0de",
        "5bb",
        "197",
        "891",
        "717",
        "110",
        "5bc",
        "5bd",
        "0c8",
        "45c",
        "698",
        "5bf",
        "005",
        "699",
        "089",
        "5c0",
        "69a",
        "621",
        "048",
        "051",
        "0f1",
        "249",
        "04d",
        "28d",
        "2f2",
        "e06f",
        "54e",
        "54f",
        "e070",
        "e071",
        "550",
        "21d",
        "0cc",
        "551",
        "12c",
        "239",
        "0f2",
        "5c1",
        "185",
        "12b",
        "5c2",
        "5c3",
        "5c4",
        "5c5",
        "69b",
        "021",
        "2f1",
        "48e",
        "0ce",
        "45d",
        "10a",
        "3fa",
        "490",
        "3fd",
        "02b",
        "02c",
        "4db",
        "0ae",
        "1ba",
        "62e",
        "62f",
        "769",
        "76b",
        "7d7",
        "120",
        "034",
        "035",
        "00a",
        "009",
        "00b",
        "630",
        "491",
        "2cb",
        "2c7",
        "2c9",
        "2ca",
        "2c8",
        "165",
        "164",
        "08d",
        "3ff",
        "00d",
        "057",
        "043",
        "5c7",
        "5c8",
        "204",
        "205",
        "7d8",
        "71e",
        "e072",
        "552",
        "7d9",
        "5c9",
        "6a0",
        "6a1",
        "722",
        "25c",
        "637",
        "e041",
        "238",
        "7da",
        "224",
        "225",
        "1f8",
        "2ed",
        "829",
        "82a",
        "1bb",
        "091",
        "0d1",
        "4de",
        "63b",
        "4df",
        "63c",
        "553",
        "1e4",
        "26c",
        "0e9",
        "5ca",
        "0cd",
        "0e2",
        "2ea",
        "29a",
        "19c",
        "127",
        "09c",
        "13e",
        "093",
        "007",
        "406",
        "4fa",
        "4fb",
        "4fc",
        "2bd",
        "4fd",
        "4fe",
        "4ff",
        "500",
        "501",
        "728",
        "502",
        "0f0",
        "503",
        "504",
        "82f",
        "234",
        "21b",
        "505",
        "506",
        "507",
        "508",
        "235",
        "0c0",
        "509",
        "e073",
        "2e5",
        "2e7",
        "5cb",
        "221",
        "226",
        "228",
        "e085",
        "e086",
        "492",
        "493",
        "03d",
        "4e2",
        "6a7",
        "e074",
        "e075",
        "e076",
        "897",
        "45f",
        "027",
        "6a9",
        "026",
        "028",
        "772",
        "729",
        "554",
        "555",
        "494",
        "773",
        "83e",
        "496",
        "5cd",
        "193",
        "1eb",
        "72e",
        "410",
        "2d0",
        "2d1",
        "2d2",
        "72f",
        "4e3",
        "5ce",
        "159",
        "0ad",
        "497",
        "157",
        "6ad",
      ],
    };
  },
  methods: {
    onBlur: function (e) {
      this.showDropdown = false;
    },
    open: function (focus) {
      if (this.disabled) return false;
      this.showDropdown = true;
      if (focus) {
        this.$nextTick(function () {
          this.$refs.comboDropdown.focus();
        });
      }
    },
    select: function (val) {
      this.value = val;
      this.showDropdown = false;
    },
  },
};
</script>

<style>
.iconpicker_window_ct {
  padding: 10px;
  display: flex;
  flex-wrap: wrap;
  flex-direction: row;
  gap: 5px;
  align-items: baseline;
  align-content: baseline;
  overflow: auto;
}

.iconpicker_window_ct > div {
  font-size: 20px;
  width: 30px;
  height: 30px;
  display: flex !important;
  justify-content: center;
  align-items: center;
}
</style>